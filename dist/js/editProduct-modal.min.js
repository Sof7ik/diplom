!function(){function e(e,t,n,r,o,u,c){try{var d=e[u](c),a=d.value}catch(e){return void n(e)}d.done?t(a):Promise.resolve(a).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,u){var c=t.apply(n,r);function d(t){e(c,o,u,d,a,"next",t)}function a(t){e(c,o,u,d,a,"throw",t)}d(void 0)}))}}function n(e){return r.apply(this,arguments)}function r(){return(r=t(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.parentNode.parentNode.dataset.productId,(r=new FormData).append("product-id",n),e.next=5,fetch("/src/php/getProductInfo.php",{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){return o(e[0])}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){var t=document.querySelector("div.edit-product-modal");document.getElementById("product-id").value=e.id,document.getElementById("product-name").value=e.name,document.getElementById("product-desc").textContent=e.description,document.getElementById("product-quantity").value=e.quantity,null==e.image?document.getElementById("product-old-image").src="https://via.placeholder.com/150":document.getElementById("product-old-image").src=e.image,t.classList.add("opened")}function u(e){document.querySelector("div.edit-product-modal").classList.remove("opened")}function c(e){return d.apply(this,arguments)}function d(){return(d=t(regeneratorRuntime.mark((function e(t){var n,r,o,u,c,d,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=document.querySelector("form.content-wrapper"),r=new FormData,o=n.querySelector('input[name="product-id"]').value,u=n.querySelector('input[name="product-name"]').value,c=n.querySelector('textarea[name="product-desc"]').value,d=n.querySelector('input[name="product-quantity"]').value,""===(a=n.querySelector('input[name="product-new-image"]').value)&&(a=document.getElementById("product-old-image").src),r.append("productID",o),r.append("productName",u),r.append("productDesc",c),r.append("productQuantity",d),r.append("productNewImage",a),e.next=16,fetch("/src/php/update-product.php",{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){200==e.code?location.reload():console.warn("Что-то пошло не так. Свяжитесь с программистом)")}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",(function(e){document.querySelectorAll("button.manage-button.edit").forEach((function(e){return e.addEventListener("click",n)})),document.querySelector(".close-modal").addEventListener("click",u),document.getElementById("editProductButton").addEventListener("click",c)}))}();